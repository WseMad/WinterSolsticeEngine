<!DOCTYPE html>

<html>
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<title>拾取库</title>

	<link rel="stylesheet" type="text/css" href="../cnWse/(0)Rset.css" />
	<link rel="stylesheet" type="text/css" href="../cnWse/(1)Plmvc.css" />
	<!--<link rel="stylesheet" type="text/css" href="../cnWse/CmnWgts.css" />-->
	<!--<link rel="stylesheet" type="text/css" href="../cnWse/CmnWgtsSkin_Blue.css" />-->
	<!--<link rel="stylesheet" type="text/css" href="../cnWse/CmnWgtsSkin_Purple.css" />-->
	<script type="text/javascript" src="../nWse/(0)Seed.js"></script>

	<!--<link rel="stylesheet" type="text/css" href="./cnWse/(0)Plmvc.css" />-->
	<!--<link rel="stylesheet" type="text/css" href="./cnWse/CmnWgts.css" />-->
	<!--<link rel="stylesheet" type="text/css" href="./cnWse/CmnWgtsSkin_Blue.css" />-->
	<!--<link rel="stylesheet" type="text/css" href="./cnWse/CmnWgtsSkin_Purple.css" />-->
	<!--<script type="text/javascript" src="./(0)Seed.js"></script>-->
	<!--<script type="text/javascript" src="./(1)WSE_nWse.js"></script>-->
	<!--<script type="text/javascript" src="./(3)WSE_nGpu.js"></script>-->
	<!--<script type="text/javascript" src="./(6)WSE_nUi.js"></script>-->
	<!--<script type="text/javascript" src="./(7)WSE_nUi_nCmnWgts.js"></script>-->


	<style type="text/css">

		body
		{
			background-color: rgb(203, 233, 207);
		}

		.cnWse_PrstTgt .cnWse_PutTgt
		{
			margin: 5px;
			border: 1px solid crimson;
			padding: 4px;
		}

		#k_PutTgt_Pnl1_Root
		{
			background-color: rgb(239, 228, 176);
		}
	</style>
</head>
<body class="cnWse_Skin_Blue">

<div id="k_PrstTgt" class="cnWse_PrstTgt cnWse_PutTgt">


</div>

<!--<div id="k_PutTgt_Lot" class="cnWse_PutTgt"></div>-->

<div id="k_PrstSrc" class="cnWse_PrstSrc cnWse_PutSrc">

	<!---->
	<!-- ======================================= 面板1 -->
	<!---->

	<!---->
	<!-- 根 -->
	<!---->

	<!--<div id="k_PutTgt_Pnl1_Root" class="cnWse_PutTgt"></div>-->
	<div id="k_Pnl1_Root" class="">
		<span data-Wse_Tit>按钮</span>
	</div>

	<!---->
	<!-- 按钮 -->
	<!---->
	<p id="k_Pnl1_Para1" class="">
		<span>这是一个段落。</span>
	</p>

	<!-- ======================================= -->

	<!---->
	<!-- 按钮 -->
	<!---->
	<div id="k_Btn" class="cnWse_PutSrc">
		<span data-Wse_Tit>按钮</span>
	</div>

	<!---->
	<!--  -->
	<!---->

</div>

<script type="text/javascript">

//@ 全局对象，同时支持页面主线程，WebWorker线程，和Node.js
var i_InNodeJs = ("undefined" == typeof self);
var l_Glb = i_InNodeJs ? global : self;

window.onload = function ()
{
	console.log("window.onload");

	nWse.stAsynIcld.cFromApp("nWse",
			[
				"nPick/Frmwk.js"

			//	,"nGpu/2dPath.js"
			]
			,
			fOnIcld);
};


function fOnIcld(a_Errs)
{
	"use strict";

	/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	// using

	var nWse = l_Glb.nWse;
	var tSara = nWse.tSara;
	var stVtuCsl = nWse.stVtuCsl;
//	var tFsm = nWse.tFsm;
	var tPntIptTrkr = nWse.tPntIptTrkr;

//	var nUi = nWse.nUi;
//	var tEfc = nUi.tEfc;
//	var stEfcMgr = nUi.stEfcMgr;
//	var tPcdrLot = nUi.tPcdrLot;
//	var stFrmwk = nUi.stFrmwk;
//	var nCmnWgts = nUi.nCmnWgts;

	var nPick = nWse.nPick;
	var tWgt = nPick.tWgt;
	var tPnl = nPick.tPnl;
	var stFrmwk = nPick.stFrmwk;

//	var nGpu = nWse.nGpu;

	/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	// 静态变量

	/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	// 示例应用程序

	var tExmApp = nWse.fClass(nApp,
		function tExmApp()
		{
			var l_This = this;
	//				l_This.e_WidPct = 100;						// 宽度百分比
	//				l_This.e_PcdrLot = new tPcdrLot();			// 程序化布局
	//				stFrmwk.cSetLot(l_This.e_PcdrLot);			// 框架
		},
		null,
		{
			eInit: function ()
			{
				var l_This = this;

				function fInitGui(a_PnlName, a_RootArea, a_RootVwpt)
				{
					var l_Wgt, l_Host;
					var l_Pnl = new nPick.tPnl(a_PnlName);

					nPick.stFrmwk.cRegPnl(l_Pnl);
					l_Pnl.cNewRoot(a_RootArea, a_RootVwpt);

					l_Wgt = l_Pnl.cAcsRoot();
					console.log("Root A = " + l_Wgt.cAcsArea().toString());

					l_Wgt.cAcsRndr().vcBindHtml({
						c_PutSrc: "k_Pnl1_Root"
						,c_PutTgt: "k_PutTgt_Pnl1_Root"
					})
						.cPutAllElmtsToTgt();

					{
						l_Wgt = new nPick.tWgt("k_Pnl1_Para1");
						l_Wgt.cSetArea$Xywh(100, 100, 100, -4/3);
					//	l_Wgt.cSetArea$Xywh(null, null, null, -4/3);	// 自动计算，保持宽高比
						l_Pnl.cAcsRoot().cAdd(l_Wgt);

						l_Wgt.cAcsRndr().vcBindHtml({
							c_PutSrc: null	//"k_Pnl1_Para1"
							,c_PutTgt: "k_PutTgt_Pnl1_Para1"
						})
							.cPutAllElmtsToTgt();
					}

					/*
					l_Wgt.cAcsRndr().cSetBodyClo(tClo.scNew$Rgba(239 / 255, 228 / 255, 176 / 255, 1));
					l_Wgt.cAcsRndr().cAcsBodyPath().cRect(false, l_Wgt.cAcsArea().c_X, l_Wgt.cAcsArea().c_Y, l_Wgt.cAcsArea().c_W, l_Wgt.cAcsArea().c_H);

					l_Wgt = new nPick.tBtn("控件H1", 0, nPick.tRefFrm.i_.i_Host, nPick.tDockWay.i_.i_LtUp);
					l_Wgt.cSetArea((new nWse.tSara()).cCrt(10, 10, 80, 60));
					l_Wgt.cAcsRndr().cAcsBodyPath();
					l_Wgt.cAcsRndr().cSetRcRds(10);

					l_Wgt.cAcsRndr().cSetCastShdw(true);
					l_Wgt.cAcsRndr().cSetBodyGrad(7);
					l_Wgt.cAcsRndr().cAcsBodyDrawStl()
							.cAddStop(0, tClo.scNew$Rgba(1, 1, 1, 1))
							.cAddStop(0.5, tClo.scNew$Rgba(1, 1, 1, 1))
							.cAddStop(1, tClo.scNew$Rgba(0.0, 0.5, 0.753, 1));

					//	l_Wgt.cAcsRndr().cAcsBodyPath().cRcRect(false, l_Wgt.cAcsArea().c_X, l_Wgt.cAcsArea().c_Y, l_Wgt.cAcsArea().c_W, l_Wgt.cAcsArea().c_H, 0);
					l_Pnl.cAcsRoot().cAdd(l_Wgt);

					l_Host = l_Wgt;
					l_Wgt = new nPick.tBtn("控件H2", 0, nPick.tRefFrm.i_.i_Host, nPick.tDockWay.i_.i_LtUp);
					l_Wgt.cSetArea((new nWse.tSara()).cCrt(10, 10, 40, 30));

					l_Wgt.cAcsRndr().cSetCastShdw(true);
					//	l_Wgt.cAcsRndr().cSetBodyClo(tClo.scNew$Rgba(0.5, 0, 0.5, 1));
					l_Wgt.cAcsRndr().cSetBodyPten("html5bg.png", 0, false); // 不匹配像素，不重复
					//	l_Wgt.cAcsRndr().cSetBodyPten("html5bg_sml.png", 0, true); // 匹配像素，重复

					l_Wgt.cAcsRndr().cAcsBodyPath();
					l_Wgt.cAcsRndr().cSetRcRds(5);
					//	l_Wgt.cAcsRndr().cAcsBodyPath().cRcRect(false, l_Wgt.cAcsArea().c_X, l_Wgt.cAcsArea().c_Y, l_Wgt.cAcsArea().c_W, l_Wgt.cAcsArea().c_H, 0);
					l_Host.cAdd(l_Wgt);
					//*/

					//l_Wgt = new nPick.tBtn("控件V", 0, nPick.tRefFrm.i_.i_Vwpt, nPick.tDockWay.i_.i_LtUp);
					//l_Wgt.cSetArea((new nWse.tSara()).cCrt(10, 30, 30, 20));
					//l_Pnl.cAcsRoot().cAdd(l_Wgt);
				}

				// 1.新建实时应用程序框架，初始化
				var tRltmAfx = nWse.tRltmAfx;
				var l_RltmAfx = new tRltmAfx();
				l_RltmAfx.cInit({
					c_PrstSrc: "k_PrstSrc",	// 指定呈现来源
					c_PrstTgt: "k_PrstTgt",	// 指定呈现目标
					c_AdpMode: tRltmAfx.tAdpMode.i_CssDrv
				});
				l_This.e_RltmAfx = l_RltmAfx;

				// 2.为拾取库的框架绑定实时应用程序框架
				nPick.stFrmwk.cBindRltmAfx(l_RltmAfx);

				// 3.面板
				fInitGui("面板1", (new nWse.tSara(0, 0, 600, 400)), null);//(new nWse.tSara(0, 0, 400, 300)));
				nPick.stFrmwk.cOpenPnl("面板1");


			}
			,
			// 运行
			cRun: function ()
			{
				var l_This = this;

				// 初始化
				l_This.eInit();

				// 运行实时应用程序框架
				l_This.e_RltmAfx.cRun();

				// 初始布局？
			//	stFrmwk.cRunLot();			// 运行布局
			}
			,
			cBpc : function (a_Lot)
			{
	//					var l_This = this;
	//					var l_Lot = a_Lot;
	//					var l_BrkPntIdx = l_Lot.cGetBrkPntIdx();
	//
	//					l_Lot
	//							.cBoa({
	//								c_Id: "k_TestBoa"
	//							})
	//							.cCol({
	//								c_GridTot: (2 == l_BrkPntIdx) ? 20 : ((1 == l_BrkPntIdx) ? 10 : 8)
	//							})
	//							.cPut({
	//								c_NewRow : true,
	//								c_Id: "k_PutTgt_Btn",
	//								c_GridCnt: (2 == l_BrkPntIdx) ? 3 : 2
	//							})
	//					;
			}
		});

	var zzz = 0;

	/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	// Over

	// 示例应用程序
	var e_App = new nApp.tExmApp();
	e_App.cRun();
}

</script>

</body>
</html>
